<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paises que apoyan los resultados de Venezuela</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100%;
            height: 80vh;
            position: relative;
        }
        .country {
            cursor: pointer;
            stroke: #ffffff;
            stroke-width: 0.5;
        }
        .red {
            fill: red;
        }
        .blue {
            fill: blue;
        }
        .grey {
            fill: grey;
        }
        .yellow {
            fill: yellow;
        }
        #info-box {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid #ccc;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Paises que apoyan a Venezuela</h1>
    <div id="map"></div>
    <div id="info-box">CONTENIDO AQUÍ, LINK AQUÍ</div>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script>
        const width = 960, height = 600;

        const svg = d3.select("#map").append("svg")
            .attr("width", width)
            .attr("height", height);

        const projection = d3.geoMercator()
            .scale(400)
            .center([-70, -15])
            .translate([width / 2, height / 2]);

        const path = d3.geoPath().projection(projection);

        const g = svg.append("g");

        const zoom = d3.zoom()
            .scaleExtent([1, 8])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        svg.call(zoom);

        d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then(function(data) {
            const latinAmerica = data.features.filter(d => {
                const id = d.id;
                return ["USA", "MEX", "GTM", "BLZ", "SLV", "HND", "NIC", "CRI", "PAN", "COL", "VEN", "GUY", "SUR", "ECU", "PER", "BRA", "BOL", "PRY", "CHL", "ARG", "URY", "CUB", "DOM"].includes(id);
            });

            g.selectAll("path")
                .data(latinAmerica)
                .enter().append("path")
                .attr("class", d => {
                    if (["ARG", "CHL", "COL", "PER", "PAN", "CRI", "GTM", "DOM", "USA"].includes(d.id)) return "country blue";
                    if (["VEN", "BOL", "CUB", "NIC"].includes(d.id)) return "country red";
                    if (["BRA", "MEX"].includes(d.id)) return "country yellow";
                    return "country grey";
                })
                .attr("d", path)
                .on("click", function(event, d) {
                    d3.select("#info-box")
                        .style("display", "block")
                        .html(`<strong>${d.properties.name}</strong><br>CONTENIDO AQUÍ, LINK AQUÍ`)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY + 10) + "px");
                });
        });
    </script>
</body>
</html>
